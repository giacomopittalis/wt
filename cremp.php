<?phpsession_start();//error_reporting(E_ALL);//ini_set('display_errors', 1);include 'sessionclass.php';include 'crempclass.php';$obj = new session;$seadmin = $obj->seadmin();?><!DOCTYPE html>     <html class="no-js" lang="en">    <head>        <meta charset="utf-8" />        <meta name="viewport" content="width=device-width" />        <title>Wellness - Admin Dashboard</title>        <link rel="stylesheet" href="stylesheets/foundation.min.css">        <script src="javascripts/modernizr.foundation.js"></script>        <link rel="stylesheet" href="style-G.css">                                  <meta charset="utf-8" />  <!-- Set the viewport width to device width for mobile -->  <meta name="viewport" content="width=device-width" />  <title>Wellness - Create New Employee</title>    <!-- Included CSS Files (Uncompressed) -->  <!--  <link rel="stylesheet" href="stylesheets/foundation.css">  -->    <!-- Included CSS Files (Compressed) -->  <script src="javascripts/modernizr.foundation.js"></script>    <script>  	function daysl(){	var abc = document.getElementById("sel4").value;	var def = document.getElementById("sel5").value;	try     { /*Generally non IE browsers*/     ajR3 = new XMLHttpRequest();    }catch (e)    { /*IE 6 and down*/try         {ajR3 = new ActiveXObject("Msxml2.XMLHTTP");        }    catch (e)        {try             {ajR3 = new ActiveXObject("Microsoft.XMLHTTP");            }        catch (e)            { /*Failure to define ajax (old or broken browser)*/             alert("Your browser is too old, or is misconfigured");             return false;            }        }    }//receive dataajR3.onreadystatechange = function(){	if(ajR3.readyState == 4){		document.getElementById("adminobj18d").innerHTML = ajR3.responseText;	}};ajR3.open("GET", "crempajax.php?month=" + def + "&year=" + abc, true);ajR3.send(null);};  </script>    <script>  	function getloc(){	var ghi = document.getElementById("sel1").value;	try     { /*Generally non IE browsers*/     ajR4 = new XMLHttpRequest();    }catch (e)    { /*IE 6 and down*/try         {ajR4 = new ActiveXObject("Msxml2.XMLHTTP");        }    catch (e)        {try             {ajR4 = new ActiveXObject("Microsoft.XMLHTTP");            }        catch (e)            { /*Failure to define ajax (old or broken browser)*/             alert("Your browser is too old, or is misconfigured");             return false;            }        }    }//receive dataajR4.onreadystatechange = function(){	if(ajR4.readyState == 4){		document.getElementById("adminobj0yb").innerHTML = ajR4.responseText;	}};ajR4.open("GET", "crempajax1.php?clid=" + ghi, true);ajR4.send(null);};  </script>    <?php    	$obj1 = new cremp;    	$outsta = "";	$e = 0;	$f = 0;		$clidsta = "";	$locidsta = "";	$fnamesta = "";	$mnamesta = "";	$lnamesta = "";	$sexsta = "";	$dobsta = "";	$deptsta = "";	$possta = "";	$desgsta = "";	$hyearsta = "";	$htypesta = "";	$hplansta = "";	$picsta = "";		$clid = "";	$locid = "";	$fname = "";	$mname = "";	$lname = "";	$sex = "";	$year = "";	$month = "";	$day = "";	$dob = "";	$dept = "";	$pos = "";	$desg = "";	$hyear = "";	$htype = "";	$hplan = "";			if (isset($_POST['sub1'])){				//Get input		$clid = $_POST['lc'];		$locid = $_POST['lid'];		$fname = $_POST['fname'];		$mname = $_POST['mname'];		$lname = $_POST['lname'];		$sex = $_POST['sex'];		$year = $_POST['year'];		$month = $_POST['month'];		$day = $_POST['day'];		$dept = $_POST['dept'];		$pos = $_POST['pos'];		$desg = $_POST['desg'];		$hyear = $_POST['hyear'];		$htype = $_POST['htype'];		$hplan = $_POST['hplan'];						//Clean input				$fname = $obj1->cleaninput($fname);		$mname = $obj1->cleaninput($mname);		$lname = $obj1->cleaninput($lname);		$dept = $obj1->cleaninput($dept);		$pos = $obj1->cleaninput($pos);		$desg = $obj1->cleaninput($desg);		$hplan = $obj1->cleaninput($hplan);				//Validate Input				$clidsta = $obj1->vclid($clid);		if ($clidsta != ""){			$e++;		}				$locidsta = $obj1->vlocid($locid);		if ($locidsta != ""){			$e++;		}				$fnamesta = $obj1->vfname($fname);		if ($fnamesta != ""){			$e++;		}				$mnamesta = $obj1->vmname($mname);		if ($mnamesta != ""){			$e++;		}				$lnamesta = $obj1->vlname($lname);		if ($lnamesta != ""){			$e++;		}				$sexsta = $obj1->vsex($sex);		if ($sexsta != ""){			$e++;		}				$dobsta = $obj1->vdate($year, $month, $day);		if ($dobsta != ""){			$e++;		}				$deptsta = $obj1->vdept($dept);		if ($deptsta != ""){			$e++;		}				$possta = $obj1->vpos($pos);		if ($possta != ""){			$e++;		}				$desgsta = $obj1->vdesg($desg);		if ($desgsta != ""){			$e++;		}				$hyearsta = $obj1->vhyear($hyear);		if ($hyearsta != ""){			$e++;		}				$htypesta = $obj1->vhtype($htype);		if ($htypesta != ""){			$e++;		}				$hplansta = $obj1->vhplan($hplan);		if ($hplansta != ""){			$e++;		}				//Validate image		//Check if user has selected a file and file size is greater than zero		if(isset($_FILES['pic']) && $_FILES['pic']['size'] > 0){			$photoname = $_FILES['pic']['name'];			$photosize = $_FILES['pic']['size'];			$phototmp = $_FILES['pic']['tmp_name'];			$photomime = $_FILES['pic']['type'];			$ext = pathinfo($photoname, PATHINFO_EXTENSION);			$maxsize = "10240000";//In bytes			$atypes = array("jpeg", "png", "gif", "jpg", "bmp", "JPG", "PNG");			//Check allowed file types			if(in_array($ext, $atypes)){				//Check file size					if($photosize > $maxsize){					$picsta = "Image size is too big";					$e++;				}				//All is well				else{					$fh = fopen($phototmp, 'r');					$photodata = fread($fh, $photosize);					$photodata = addslashes($photodata);				}			}			else{				$picsta = "Only Images can be selected";				$e++;			}		}		else{			$f = 1;		}				//All is well		if ($e == 0){			$dob = $month."/".$day."/".$year;			$destination = "";			$dirname = "images/".$clid;			if (!is_dir($dirname)){				mkdir($dirname);			}			$max = $obj1->getmaxid();			$next = $max + 1;			if ($f == 0){				$phopath = $dirname."/";				$newphotoname = $clid."-".$next.".".$ext;				$destination = $phopath.$newphotoname;				move_uploaded_file($phototmp, $destination);				$obj2 = new SimpleImage;				$obj2->load($destination);				$width = 600;				$height = 600;				$obj2->resize($width, $height);				$obj2->save($destination);			}			else{				$destination = "images/noimage.jpg";			}						$status = "active";						$res1 = $obj1->cremp1($clid, $locid, $fname, $mname, $lname, $dob, $sex, $dept, $pos, $desg, $htype, $hyear, $destination, $hplan, $status);			if ($res1){				$suname = $_SESSION['uname'];				$ipadd = $_SESSION['ipadd'];				$timeformat = "d-m-Y G-i-s";				$dts = date($timeformat);				$dts = (string)$dts;				$dts = $obj1->encode($dts);				$action = "cremp";				$action = $obj1->encode($action);				$res2 = $obj1->upemplog($suname, $ipadd, $dts, $action, $next);				if ($res2){					$outsta = "Employee successfully created";										$e = 0;					$f = 0;								$clidsta = "";					$locidsta = "";					$fnamesta = "";					$mnamesta = "";					$lnamesta = "";					$sexsta = "";					$dobsta = "";					$deptsta = "";					$possta = "";					$desgsta = "";					$hyearsta = "";					$htypesta = "";					$hplansta = "";					$picsta = "";						$clid = "";					$locid = "";					$fname = "";					$mname = "";					$lname = "";					$sex = "";					$year = "";					$month = "";					$day = "";					$dob = "";					$dept = "";					$pos = "";					$desg = "";					$hyear = "";					$htype = "";					$hplan = "";				}				else{					$outsta = "Could not create employee";				}			}		}	}  	  ?></head>    <body>         <?php include('header.php'); ?>         <script src="javascripts/foundation.min.js"></script>        <script src="javascripts/app.js"></script>                         <div class="left-column">            <?php include "inc_left_column.php" ?>        </div>        <div class="right-column">            <div id="activity-feed">                 <div id="activity-feed-title">                      Create Employee                 </div>                <div id="create-employee">                                        <style>      </style>                                                    <form name="adminonefrm" id="frmadminone" action="cremp.php" method="post" enctype="multipart/form-data">                <fieldset>							<legend>Hierarchy</legend>                                                        <div  id="adminobj0x" style=" width: 40%!important; float:left!important;">                                                            <label class="adminlkey">Client</label>                                                            <div id="adminobj0xb">									<?php                                                                        $obj1->printlinkedclientlist();                                                                        ?>                                                            </div>                                                            <label class="adminlval"><?php print $clidsta; ?></label>                                                        </div>                                                        <div  id="adminobj0y" style="width: 40%!important; float:left!important;">                                                            <label class="adminlkey">Location</label>                                                            <div id="adminobj0yb">                                                                <select name="lid" id="sel2" tabindex="2">                                                                    <option value="0">Select Location</option>                                                                </select>                                                            </div>                                                            <label class="adminlval"><?php print $locidsta; ?></label>                                                        </div>                </fieldset>                <div class="delim">                </div>                    <fieldset>							<legend>Nomenclature</legend>							<div id="adminobj1" style=" width: 80%!important; float:left!important;">								<label class="adminlkey">First Name</label><input type="text" name="fname" id="txt1" tabindex="1" maxlength="30" placeholder="First Name" value="<?php print $fname; ?>"/>	<label class="adminlval"><?php print $fnamesta; ?></label>								<label class="adminlkey">Middle Name</label><input type="text" name="mname" id="txt2" tabindex="2" maxlength="30" placeholder="Middle Name" value="<?php print $mname; ?>"/><label class="adminlval"><?php print $mnamesta; ?></label><label class="adminlkey">Last Name</label>								<input type="text" name="lname" id="txt3" tabindex="3" maxlength="30" placeholder="Last Name" value="<?php print $lname; ?>"/>							<label class="adminlval"><?php print $lnamesta; ?></label>														</div>						</fieldset><div class="delim">                </div>						<fieldset>                                                    <legend>Personal Demographics</legend>                                                    <div  id="adminobj1" style=" width: 40%!important; float:left!important;">                                                        <label class="adminlkey">Sex</label>                                                        <select name="sex" id="sel7">                                                            <option value="0">Select Sex</option>                                                            <option value="female">Female</option>                                                            <option value="male">Male</option>                                                            <option value="neuter">Neuter</option>                                                        </select>                                                        <label class="adminlval"><?php print $sexsta; ?></label>                                                    </div>                                                    <div  id="adminobj18" style=" width: 40%!important; float:left!important;">                                                        <label class="adminlkey">Date of Birth</label>                                                            <?php $obj1->printyear(); ?>                                                                <?php $obj1->printmonth(); ?>                                                                    <?php $obj1->printcurdays(); ?>                                                        <label class="adminlval"><?php print $dobsta; ?></label>                                                    </div>                                                </fieldset><div class="delim">                </div>						<fieldset>							<legend>Official Demographics</legend>							<div id="adminobj11" style=" width: 80%!important; float:left!important;">																	<label class="adminlkey">Department</label>							<input type="text" name="dept" id="txt4" tabindex="11" maxlength="50" placeholder="Department" value="<?php print $dept; ?>"/>								<label class="adminlval"><?php print $deptsta; ?></label>								<label class="adminlkey">Position</label>								<input type="text" name="pos" id="txt37" tabindex="12" maxlength="60" placeholder="Position" value="<?php print $pos; ?>"/><label class="adminlval"><?php print $possta; ?></label>								<label class="adminlkey">Employee Number</label>								<input type="text" name="desg" id="txt5" tabindex="12" maxlength="30" placeholder="Designation" value="<?php print $desg; ?>"/>																	<label class="adminlval"><?php print $desgsta; ?></label>									<label class="adminlkey">Hire Year</label>								<?php $obj1->printyear1() ?>									<label class="adminlval"><?php print $hyearsta; ?></label>									<label class="adminlkey">Hire Type</label>								<select name="htype" id="sel8">										<option value="0">Select Hire Type</option>										<option value="hourly">Hourly</option>										<option value="salary">Salary</option>										<option value="union">Union</option>									</select>								<label class="adminlval"><?php print $htypesta; ?></label>									<label class="adminlkey">Health Plan</label><input type="text" name="hplan" id="txt6" maxlength="60" value="<?php print $hplan; ?>"/>                                                            																<label class="adminlval"><?php print $hplansta; ?></label>															</div>						</fieldset><div class="delim">                </div>						<fieldset>                                                    <legend>Identification<br>Upload your photo</legend>							<div id="adminobj16" style=" width: 80%!important; float:left!important;">																									<input type="hidden" name="MAX_FILE_SIZE" value="1024000" />									<input type="file" name="pic" id="pic1" tabindex="17"/>									<label class="adminlval"><?php print $picsta; ?></label>															</div>						</fieldset><div class="delim">                </div>						<fieldset>							<div class="row" id="adminobj17">								<div class="three columns" id="adminobj17a">																	</div>								<div class="four columns" id="adminobj17b">                                                                    <div style="width:250px; margin-left:550px; float:left;">                                                                    <input type="reset" name="sub1" id="butreset" tabindex="18" value=""  style="float:left;"  />      <input type="submit" name="sub1" id="butcreate" tabindex="18" value="" style="margin-left: 10px; float:left;" />                                                                    </div>								</div>								<div class="five columns" id="loginobj17c">									<label class="adminlval"><?php print $outsta; ?></label>								</div>							</div>						</fieldset>					</form>                </div>            </div>                    </div>    </body></html>